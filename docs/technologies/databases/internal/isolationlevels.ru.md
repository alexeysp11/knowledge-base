# isolationlevels

**Уровень изоляции** - это механизм, с помощью которого можно определить, насколько видимимы будут изменения, сделанные одной транзакцией, для других транзакций. 

В PostgreSQL существует четыре уровня изоляции: 
- `Read Uncommitted` (в PostgreSQL не используется и заменяется на уровень изоляции `Read Committed`), 
- `Read Committed` (используется по умолчанию), 
- `Repeatable Read`,
- `Serializable`.

Уровень изоляции `Read Uncommitted` подходит для сценариев, где необходимо минимизировать время блокировки и целостность данных не является критически важной.

Разница между уровнями изоляции `Read Committed` и `Serializable` заключается в том, что уровень `Serializable` обеспечивает более строгую изоляцию данных, что может привести к повышенной нагрузке на базу данных.

Рекомендации по выбору уровня изоляции зависят от конкретных требований приложения: для приложений с высокой конкуренцией ресурсов рекомендуется `Serializable`, для приложений с низкой конкуренцией - `Read Committed` или `Repeatable Read`.

## Типы блокировок

Разные уровни изоляции могут вызывать различные типы блокировок, такие как Share Locks, Exclusive Locks, Row Share Locks и другие.

## Проблемы при использовании разных уровней изоляции

Изменить уровень изоляции внутри транзакции в PostgreSQL нельзя, это нужно сделать до начала транзакции.

Уровни изоляции могут повлиять на производительность базы данных из-за различного количества блокировок и конфликтов, которые могут возникнуть при одновременном доступе к данным.

### Serializable

При использовании уровня изоляции `Serializable` могут возникнуть проблемы с производительностью из-за увеличения количества блокировок и возможного появления deadlock'ов из-за жесткой изоляции транзакций.

Особенно эта проблема актуальна в высоконагруженной системе.

### Read Uncommitted

При использовании уровня изоляции `Read Uncommitted` операции чтения могут быть заблокированы другими транзакциями, что может привести к проблемам с целостностью данных.

### Repeatable Read

Преимущества уровня изоляции `Repeatable Read` включают возможность повторного чтения данных без изменений, но недостатком является возможное появление фантомных строк при выполнении длинных транзакций.

## Как установить или проверить уровень изоляции для текущей транзакции

Установить уровень изоляции для текущей транзакции в PostgreSQL можно с помощью команды `SET TRANSACTION ISOLATION LEVEL`.

Текущий уровень изоляции для сеанса в PostgreSQL можно проверить с помощью функции `current_setting('transaction_isolation')`.

## Стратегии решения конфликтов блокировок

Стратегии решения конфликтов блокировок при использовании разных уровней изоляции могут включать использование очередей запросов, оптимизацию запросов и дополнительные проверки перед выполнением операций.
